<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript">
        var jsonObj;
        function viewJSON(what) {
            var URL = what.URL.value;   //take the value from what
            console.log("viewJSON has been activated!");
            function loadJSON (url) {           //Separate function to deal with loadJSOn
                console.log("loadJSON has been activated!");
                var xmlhttp=new XMLHttpRequest();
                try {
                    xmlhttp.open("GET",url,false); //open, send, responseText are
                    xmlhttp.send(); //properties of XMLHTTPRequest
                    jsonObj=JSON.parse(xmlhttp.responseText);
                }
                catch (err) { //error to catch when the file does not exist
                    console.log("An error has occurred: " + err.message);
                    alert("The requested file does not exist!");
                    return;
                }
                return jsonObj;
            }
            // ....... processing document goes here

            jsonObj = loadJSON(URL);
            jsonObj.onload=generateHTML(jsonObj);
            hWin = window.open("", "Homework2", "height=800,width=600");
            hWin.document.write(html_text);
            hWin.document.close();
            console.log("Reached the end of viewJSON");
        }

        function generateHTML(jsonObj){
            root=jsonObj.DocumentElement;
            html_text="<html><head><title>JSON Parse Result</title></head><body>";
        }
        /*
        var jsonDoc;            //RAW DATA
        var jsonPhrased;         //Obj of jsonDoc
        function loadJSON(url) {
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open("GET", url, false); //open, send, responseText are
            xmlhttp.send(); //properties of XMLHTTPRequest
            jsonDoc = xmlhttp.responseText;
            alert("loadJSON Function has been pressed");
            console.log("LOGGER:loadJson has been activated.")
            return jsonDoc;
        }*/
        // ....... processing document goes here

        /*
        function viewJson(where){
            var URL = where.URL.value;
            jsonDoc = loadJSON(URL);
            jsonDoc.onload=generateHTML(jsonDoc);
            hWin = window.open("", "HW1", "height=800,width=600");
            hWin.document.write(html_text);
            hWin.document.close();
        }
        function verifyURL(){
            var url = document.getElementById("file").value; //Get the value of file, the text
            if (url == "") { // If Blank
                alert("The textbook is empty. Enter a file name!")
            }

        }*/

    </script>
</head>

<body>

    <p style="text-align: center;">
        <B>Enter URL for Trucking List JSON File</B><br><br>
        <form name="myform" method="POST" id="location">
            <!--<input id="file" type="text"><br><br>-->
            <input type="text" name="URL" maxlength="255" value="truckinglist.json"><br><br>
            <input type="button" name="submit" value="Submit Query" onClick="viewJSON(this.form)">
        </form>
    </p>
</body>

</html>